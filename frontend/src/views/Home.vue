<template>
  <div>
    <v-row>
      <v-col cols="12">
        <v-card>
          <v-card-title class="text-h4">
            üè≠ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å–∫—Ä–æ—è ZVD
          </v-card-title>
          <v-card-subtitle>
            –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å–∫—Ä–æ—è –¥–µ—Ç–∞–ª–µ–π –Ω–∞ –ª–∏—Å—Ç—ã —Å —É—á–µ—Ç–æ–º –æ–±—Ä–µ–∑–∫–æ–≤
          </v-card-subtitle>
        </v-card>
      </v-col>
    </v-row>

    <v-row class="mt-4">
      <v-col cols="12" md="4">
        <v-card color="primary" dark>
          <v-card-text>
            <div class="text-h2">{{ stats.available }}</div>
            <div class="text-subtitle-1">–û–±—Ä–µ–∑–∫–æ–≤ –≤ –Ω–∞–ª–∏—á–∏–∏</div>
          </v-card-text>
        </v-card>
      </v-col>

      <v-col cols="12" md="4">
        <v-card color="success" dark>
          <v-card-text>
            <div class="text-h2">{{ stats.reuse_percent }}%</div>
            <div class="text-subtitle-1">–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
          </v-card-text>
        </v-card>
      </v-col>

      <v-col cols="12" md="4">
        <v-card color="info" dark>
          <v-card-text>
            <div class="text-h2">{{ stats.total_value_rub.toLocaleString() }}‚ÇΩ</div>
            <div class="text-subtitle-1">–°—Ç–æ–∏–º–æ—Å—Ç—å –æ–±—Ä–µ–∑–∫–æ–≤</div>
          </v-card-text>
        </v-card>
      </v-col>
    </v-row>

    <v-row class="mt-4">
      <v-col cols="12" md="6">
        <v-card>
          <v-card-title>üìä –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Ä–∞—Å–∫—Ä–æ—è</v-card-title>
          <v-card-text>
            –†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞—Å–∫—Ä–æ–π –¥–µ—Ç–∞–ª–µ–π –Ω–∞ –ª–∏—Å—Ç—ã
          </v-card-text>
          <v-card-actions>
            <v-btn color="primary" :to="'/calculator'" size="large">
              –û—Ç–∫—Ä—ã—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
            </v-btn>
          </v-card-actions>
        </v-card>
      </v-col>

      <v-col cols="12" md="6">
        <v-card>
          <v-card-title>üóëÔ∏è –ë–∞–∑–∞ –æ–±—Ä–µ–∑–∫–æ–≤</v-card-title>
          <v-card-text>
            –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –æ–±—Ä–µ–∑–∫–æ–≤
          </v-card-text>
          <v-card-actions>
            <v-btn color="primary" :to="'/wastes'" size="large">
              –û—Ç–∫—Ä—ã—Ç—å –±–∞–∑—É
            </v-btn>
          </v-card-actions>
        </v-card>
      </v-col>
    </v-row>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import axios from 'axios'

const stats = ref({
  total: 0,
  available: 0,
  used: 0,
  reuse_percent: 0,
  total_value_rub: 0
})

const loadStatistics = async () => {
  try {
    const response = await axios.get('/api/wastes/statistics')
    stats.value = response.data
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:', error)
  }
}

onMounted(() => {
  loadStatistics()
})
</script>

